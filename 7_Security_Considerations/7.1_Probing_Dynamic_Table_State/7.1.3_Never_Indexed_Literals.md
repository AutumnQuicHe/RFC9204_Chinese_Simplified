---
title: "7.1.3. 请勿索引明文"
anchor: "7.1.3_Never_Indexed_Literals"
weight: 7130
rank: "h3"
---

实现还可以选择不压缩敏感字段，而是将它们的值编码为明文，来保护这些字段。

拒绝向动态表插入字段行的做法只有在所有跃点都采用它时才有效。
可以使用比特位“请勿索引明文”（详见[第4.5.4章](#4.5.4_Literal_Field_Line_with_Name_Reference)）来向中间设备发出信号，告知它们某个值是有意以明文发送的。

如果某个值的明文指称上设置了比特位`N`，那么中间设备{{< req_level MUST_NOT >}}将它重编码为一个会引用该值的索引的指称。
如果使用QPACK来重编码，那么{{< req_level MUST >}}使用设置了比特位`N`的明文指称。
如果使用HPACK来重编码，那么{{< req_level MUST >}}使用“请勿索引明文”指称（详见《[RFC7541](https://www.rfc-editor.org/info/rfc7541)》的[第6.2.3章](https://www.rfc-editor.org/rfc/rfc7541#section-6.2.3)）。

要不要选择将字段值标记为“请勿索引”取决于多项因素。
由于QPACK并没有针对猜测整个字段值的攻击进行保护，较短的或低熵的值会更轻易地被攻击者破解。
因此，编码器可以选择不对低熵的值进行索引。

编码器还可以选择不对它认为高度易受攻击或它认为对破解敏感的字段值进行索引，例如标头`Cookie`和`Authorization`。

相反地，编码器可能倾向于对破解后价值较低或无价值的字段值进行索引。
例如，标头`User-Agent`并不会因不同请求而经常变化，且会被发送给任意服务器。
在这种情况下，即便攻击者确信请求中使用了特定的`User-Agent`值，这也没什么价值。

注意，随着新型攻击的发现，这些用于决定要不要使用“请勿索引明文”指称的原则也会更新。

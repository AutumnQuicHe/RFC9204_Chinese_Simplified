---
title: "2.1.3. 避免流控死锁"
anchor: "2.1.3_Avoiding_Flow_Control_Deadlocks"
weight: 2130
rank: "h3"
---

在流上被流量控制所限制的写指令可能造成死锁。

解码器可能只会在编码流收到必要的更新后，才为传递已编码字段组的流提高流量控制额度。
如果消耗与释放用于传递已编码字段组的流上的数据是能否确保编码流（或整条连接）的流量控制额度的前提，那么就可能引发死锁。

更一般地，如果解码器在收到完整的指令前扣留流量控制额度，那么包含着巨大指令的流就可能被死锁。

为了避免此类死锁，编码器{{< req_level SHOULD_NOT >}}写入指令，除非流与连接的流量控制额度足够支持传输整条指令。

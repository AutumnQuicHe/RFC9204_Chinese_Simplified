---
title: "2.2.2. 状态同步"
anchor: "2.2.2_State_Synchronization"
weight: 222
rank: "h3"
---

解码器通过从解码流发送解码指令（详见[第4.4章]()）通知对端下述事件。

#### 2.2.2.1. 字段组处理完成

在解码器完成解码一个使用包含动态表引用的表示编码的字段块后，其{{< req_level MUST >}}发射一个“块确认（Section Acknowledgment）”指令（详见[第4.4.1章]()）。
一条流可能携带多个字段块用于中间回复、挂载以及下推请求。
编码器通过确认流上最早的、包含动态表引用的未确认字段块解析每条块确认指令。

#### 2.2.2.2. 放弃流

当终端在流结束或在处理完所有编码字段块前收到其流重置，或在其中止该流读取后，其下达一个“流取消（Stream Cancellation）”指令，详见[第4.4.2章]()。
这种信号适用于所有的动态表引用均已解决的流。
最大动态表容量（详见[第3.2.3章]()）为零的解码器{{< req_level MAY >}}省略发送流取消指令，因为此时编码器不能有任何动态表引用。
编码器不可以使用该指令来推断某些对动态表的更新是否已被接收到。

块确认和流取消指令允许编码器删除对动态表中条目的引用。
当绝对索引小于“已知接收计数（Known Received Count）”的条目没有引用，则其是可驱逐的，详见[第2.1.1章]()。

#### 2.2.2.3. 新表条目

在编码流上接收到新表条目后，编码器自行决定何时发射“插入计数上升（Insert Count Increment）”指令，详见[第4.4.3章]()。
在添加完每条新动态表条目后都发射一条该类指令，将会给编码器提供最及时的反馈，但是也可能与解码器的其余反馈产生重复。
通过延迟插入计数额度指令，可能使得解码器能够合并多条插入计数额度指令，甚至用块确认指令彻底取代，详见[第4.4.1章]()。
然而，拖延太长时间的做法，例如编码器等待某条目被确认后再使用它，可能降低压缩效率。

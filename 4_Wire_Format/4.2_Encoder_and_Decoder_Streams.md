---
title: "4.2. 编码流与解码流"
anchor: "4.2_Encoder_and_Decoder_Streams"
weight: 4200
rank: "h2"
---

QPACK定义了两种单向流类型：

* 编码流是类型为`0x02`的单向流。
它从编码器向解码器传递没有帧结构的编码指令序列。

* 解码流是类型为`0x03`的单向流，它从解码器向编码器传递没有帧结构的解码指令序列。

每个HTTP/3终端都具备一组QPACK编码器和解码器。
每个终端{{< req_level MUST >}}发起至多一个编码流和至多一个解码流。
同一种流类型，接收到第二条流的情况{{< req_level MUST >}}被视作类型为`H3_STREAM_CREATION_ERROR`（流创建错误）的连接错误。

发送方{{< req_level MUST_NOT >}}关闭这些流中的任意一条，且接收方{{< req_level MUST_NOT >}}请求发送方关闭这些流中的任意一条。
无论流类型，流被关闭的情况{{< req_level MUST >}}被视作类型为`H3_CLOSED_CRITICAL_STREAM`（关键流遭关闭）的连接错误。

如果不会用到编码流，那么终端{{< req_level MAY >}}不创建它（例如，当编码器不希望使用动态表或对端允许的动态表容量上限为零时）。

如果终端的解码器将动态表的容量上限设置为零，那么终端{{< req_level MAY >}}不创建解码流。

即使连接的设置阻止终端使用编解码流，终端也{{< req_level MUST >}}允许其对端能够创建一条编码流和一条解码流。
